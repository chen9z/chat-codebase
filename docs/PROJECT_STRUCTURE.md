# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ æ¨èçš„é¡¹ç›®ç»“æ„

```
chat-codebase/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ uv.lock                     # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ agent.py                # ä¸»è¦çš„ Agent ç±»
â”‚   â”œâ”€â”€ rag.py                  # RAG ç›¸å…³åŠŸèƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                   # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ repository.py       # æ•°æ®ä»“åº“
â”‚   â”‚   â””â”€â”€ splitter.py         # ä»£ç åˆ†å‰²å™¨ï¼ˆå«æ³¨é‡Šå…³è”ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ model/                  # æ¨¡å‹ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ embedding.py        # åµŒå…¥æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ llm.py             # å¤§è¯­è¨€æ¨¡å‹
â”‚   â”‚   â””â”€â”€ reranker.py        # é‡æ’åºæ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                  # å·¥å…·é›†åˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py            # åŸºç¡€å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ codebase_search.py # ä»£ç åº“æœç´¢
â”‚   â”‚   â”œâ”€â”€ grep_search.py     # æ–‡æœ¬æœç´¢
â”‚   â”‚   â”œâ”€â”€ view_code_item.py  # ä»£ç é¡¹æŸ¥çœ‹
â”‚   â”‚   â””â”€â”€ ...                # å…¶ä»–å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ file_utils.py      # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ text_utils.py      # æ–‡æœ¬å¤„ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ logging_utils.py   # æ—¥å¿—å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ config/                 # é…ç½®æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ settings.py        # åŸºç¡€è®¾ç½®
â”‚       â””â”€â”€ parser_config.py   # è§£æå™¨é…ç½®
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py            # pytest é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_splitter.py   # åˆ†å‰²å™¨æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_comment_association.py  # æ³¨é‡Šå…³è”æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_tools.py      # å·¥å…·æµ‹è¯•
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_end_to_end.py # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_agent.py      # Agent é›†æˆæµ‹è¯•
â”‚   â”‚
â”‚   â””â”€â”€ fixtures/              # æµ‹è¯•æ•°æ®
â”‚       â”œâ”€â”€ sample_code/       # ç¤ºä¾‹ä»£ç æ–‡ä»¶
â”‚       â””â”€â”€ test_data.json     # æµ‹è¯•æ•°æ®
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md   # é¡¹ç›®ç»“æ„è¯´æ˜
â”‚   â”œâ”€â”€ API.md                 # API æ–‡æ¡£
â”‚   â”œâ”€â”€ DEVELOPMENT.md         # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ DEPLOYMENT.md          # éƒ¨ç½²æŒ‡å—
â”‚
â””â”€â”€ scripts/                   # è„šæœ¬ç›®å½•
    â”œâ”€â”€ setup.sh              # ç¯å¢ƒè®¾ç½®è„šæœ¬
    â”œâ”€â”€ run_tests.sh          # æµ‹è¯•è¿è¡Œè„šæœ¬
    â””â”€â”€ build.sh              # æ„å»ºè„šæœ¬
```

## ğŸ”§ ç»“æ„ä¼˜åŒ–è¦ç‚¹

### 1. **æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»**
- `src/` - æ‰€æœ‰æºä»£ç ï¼ˆåŒ…æ‹¬é…ç½®ï¼‰
- `tests/` - æµ‹è¯•ä»£ç 
- `docs/` - æ–‡æ¡£
- `scripts/` - è„šæœ¬

### 2. **å®Œæ•´çš„åŒ…ç»“æ„**
- æ¯ä¸ªç›®å½•éƒ½æœ‰ `__init__.py`
- æ”¯æŒç›¸å¯¹å¯¼å…¥å’Œç»å¯¹å¯¼å…¥

### 3. **æµ‹è¯•ç»„ç»‡**
- `unit/` - å•å…ƒæµ‹è¯•
- `integration/` - é›†æˆæµ‹è¯•
- `fixtures/` - æµ‹è¯•æ•°æ®

### 4. **é…ç½®ç®¡ç†**
- ç¯å¢ƒå˜é‡åœ¨ `.env`
- ä»£ç é…ç½®åœ¨ `src/config/`
- é¡¹ç›®é…ç½®åœ¨ `pyproject.toml`

## ğŸš€ ä½¿ç”¨æ–¹å¼

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
uv run pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
uv run pytest tests/integration/

# è¿è¡Œç‰¹å®šæµ‹è¯•
uv run pytest tests/unit/test_comment_association.py
```

### å¯¼å…¥æ¨¡å—
```python
# ä»é¡¹ç›®æ ¹ç›®å½•å¯¼å…¥
from src.data.splitter import parse
from src.tools.codebase_search import CodebaseSearchTool
from src.config.settings import ext_to_lang
```

## ğŸ“ è¿ç§»æ­¥éª¤

1. ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ° `tests/` ç›®å½•
2. åˆ›å»ºç¼ºå°‘çš„ `__init__.py` æ–‡ä»¶
3. ä¿®å¤å¯¼å…¥è·¯å¾„
4. æ›´æ–° `pyproject.toml` ä¸­çš„æµ‹è¯•è·¯å¾„
5. æ¸…ç†æ ¹ç›®å½•çš„ä¸´æ—¶æ–‡ä»¶
